# Apache Configuration for MTEGM SMM Portal
# This file redirects all requests to the wwwroot directory
# and prevents directory listing for security

# Disable directory browsing
Options -Indexes

# Enable URL rewriting
RewriteEngine On

# Redirect all requests to wwwroot directory
# except those already targeting wwwroot
RewriteCond %{REQUEST_URI} !^/wwwroot/
RewriteRule ^(.*)$ wwwroot/$1 [L]

# Additional security headers (optional but recommended)
<IfModule mod_headers.c>
    # Prevent clickjacking
    Header set X-Frame-Options "SAMEORIGIN"

    # Prevent MIME type sniffing
    Header set X-Content-Type-Options "nosniff"

    # Enable XSS protection
    Header set X-XSS-Protection "1; mode=block"
</IfModule>

# Deny access to sensitive files
<FilesMatch "\.(env|json|lock|md|yml|yaml|ini|log|sh|bat|ps1)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# Deny access to hidden files (except .htaccess)
<FilesMatch "^\.(?!htaccess)">
    Order Allow,Deny
    Deny from all
</FilesMatch>